同学们，大家好，今天由我来给大家简要介绍一下奔腾机的中断机制。

这是这个PPT的目录，我首先会介绍一些基本概念，之后再具体介绍奔腾机的中断机制。

首先是奔腾处理器的基本特征，也就是简单地介绍一下什么是奔腾处理器，以及它有什么特点。我们看到，这里总结出了6个基本特点。大家可以简单浏览一下，本页全是字，我就不用过多讲解了。

接下来我给大家简单讲一下什么是中断。中断的概念是指计算机在执行现行程序的过程中，出现了一些急需处理的异常情况，那么此时CPU可以暂时中止现行的程序，转而去对异常情况进行处理，处理完成之后，再回来继续执行之前的程序。

左边是一个中断处理的基本流程图。由于显示效果，大家可能看不太清楚。我这里给大家讲一下。

【】

接下来是实模式和保护模式。这个概念是针对于x86处理器的东西。由于我们讲的Pentium处理器在中断机制会涉及这两个概念，因此我们先放在前面简单讲一下重点。

实模式和保护模式都是CPU的工作模式。实模式叫RealMode，保护模式叫做ProtectedMode。这两个工作模式是在CPU的不同结构下先后提出的。

首先讲一下实模式。这是x86架构的早期工作模式。当时的CPU是使用的20位地址线，16位寄存器，在寻址时就采用了基址寻址方式。具体寻址方式为：基址寄存器的16位数据左移4位后，加上偏移地址的16位数据，形成一个20位的实际地址。CPU通过这个地址直接访问主存从而获取数据。在这个模式下，“实”体现在CPU访问的地址是真实的地址。

接下来是保护模式。它是x86架构的更现代的工作模式。此时CPU一般使用32根地址线，其中的寄存器也大多是32位的。它的寻址方式也是基址寻址。但它和实模式的区别就在于，基址地址并不会直接放在基址寄存器中，而是放在一个叫做全局描述符表（GDT）中。这个表内存放了段基址、段的界限、一些权限信息等其他内容。CPU在进行寻址操作中，通过段寄存器在GDT中找到对应的表项，然后得到基地址，然后再和偏移量结合从而得到主存地址。保护模式最重要的就是这个GDT表的使用，它避免了程序直接访问一个真实的物理地址，而是使用GDT表，从而提升了数据访问的安全性，这也就是保护模式的保护二字的体现。



好了，基本概念介绍完成，接下来进入Pentium中断机制的具体讲解。

首先是中断类型。奔腾机对中断分为两种，一种是外部中断，也就是硬中断，由CPU和外部硬件信号引发，分为可屏蔽中断和非屏蔽中断，可屏蔽中断就是CPU可以暂时搁置的中断，比如说CPU在进行更加重要的活动而这个中断没那么重要。具体的例子为：当CPU正在进行进程切换的操作，其中有几步必须一气呵成地进行，这个时候你按了一下键盘，给了一个中断信号，这个时候CPU肯定是先把进程操作切换做完再去理会你的键盘输入对吧，键盘输入造成的中断就是一个可屏蔽中断。再举一个“非屏蔽中断的例子”，比如说你的电脑突然断电了，此时不管CPU在做什么重要的任务，它都必须立即趁电脑没完全关机之前，把一些重要数据保存一下对吧，那么断电触发的中断就是一种“非屏蔽中断”。

另一种中断类型是异常，我们的书上叫做“异常中断”，是由指令引发的，我们也叫“软中断”。异常中断分为执行异常和执行软件中断指令。执行异常就是CPU在执行指令发现这个指令做不下去了，就给一个中断强行停掉；执行软件中断指令就是执行一个特定的指令，主动地进入中断。

一般来说，异常的优先级会比较高，因为这种情况通常是更加紧急的。



然后是